<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">

<!-- custom elements -->
<link rel="import" href="emsi-button.html">
<link rel="import" href="emsi-firebase-document.html">

<dom-module id="emsi-homepage-landingscreen">
	<template>
		<style is="custom-style">
			:host {
				display: block;
				height: 80vh;
				width: 100%;
			}

			@font-face {
			    font-family: MyriadProSemiBold;
			    src: url(../fonts/MyriadPro-Semibold.otf);
			}

			@font-face {
			    font-family: MyriadProIt;
			    src: url(../fonts/MyriadPro-It.otf);
			}

			#backgroundImage {
				position: absolute;
				height: 110vh;
				width: 100%;
				z-index: -10;
				top: 0px;
				filter: brightness(90%);
			}

			#personImage {
				position: absolute;
				z-index: -9;
				right:-0;
				top: 5vh;
				width: 80vh;
				height: 90vh;
			}

			.container {
				width: 100%;
				margin-top: 25vh;
			}

			#title {
				font-size: 28pt;
				margin-left: 5vw;
				letter-spacing: 0px;
			}

			#subtitle {
				font-family: MyriadProIt;
				font-size: 16pt;
				margin-left: 5vw;
				margin-top: 5vh;
			}

			.homepageText {
				color: white;
    			text-shadow: 2px 2px 5px black;
				font-family: MyriadProSemiBold;
			}

			emsi-button {
				margin-left: 5vw;
				margin-top: 5vh;
			}

			@media screen and (max-width: 1000px) {
				#title {
					margin-left: 2vw;
					font-size: 20pt;
					padding-left: 5vw;
					padding-right: 5vw;
				}

				#subtitle {
					margin-left: 2vw;
					margin-top: 5vh;
					font-size: 20px;
					padding-left:5vw;
					padding-right: 5vw;
				}

				emsi-button {
					margin-left: 7vw;
					margin-top: 5vh;
					font-size: 15px;
				}

				#personImage {
					top: 15vh;
					width: 70vh;
					height: 80vh;
				}

				.container {
					margin-top: 20vh;
				}
			}

			@media screen and (max-width: 650px) {
				#personImage {
					width: 0px;
					height: 0px;
				}


			}
		</style>

		<emsi-firebase-document my-path="home/title" lang="{{lang}}" on-child-output-changed="updateTitle"> </emsi-firebase-document>
		<emsi-firebase-document my-path="home/churchButton" lang="{{lang}}" on-child-output-changed="updateButton"> </emsi-firebase-document>

		<iron-image sizing="cover" id="personImage" preload src="https://firebasestorage.googleapis.com/v0/b/emsi-e77d5.appspot.com/o/DonnaPic_Cropped-01.png?alt=media&token=299840a1-c839-497c-aa89-59a007925d24"></iron-image>

		<iron-image id="backgroundImage" style="background-color: black;" sizing="cover" preload src="https://firebasestorage.googleapis.com/v0/b/emsi-e77d5.appspot.com/o/MainSanctuary_ImageBlurredFINAL.jpg?alt=media&token=bdefa846-110b-4dc8-8818-57f1e37ff736"></iron-image>

		<div class="container">
			<template is="dom-if" if="[[isEnglish]]"> <div id="title" class="homepageText"> {{title1}} <br> {{title2}} </div> </template>
			<template is="dom-if" if="[[!isEnglish]]"> <div id="title" class="homepageText"> {{title}} </div> </template>
			<div id="subtitle" class="homepageText"> <emsi-firebase-document my-path="home/subtitle" lang="{{lang}}" display> </emsi-firebase-document>  </div>
			<emsi-button color="blue" on-tap="changeRouteToSearch"> <emsi-firebase-document my-path="home/churchButton" lang="{{lang}}" display> </emsi-firebase-document>  </emsi-button>
		</div>

	</template>
	<script>
		Polymer({
			is: 'emsi-homepage-landingscreen',

			changeRouteToSearch: function() {
				this.fire("emsi-route-change-event", {route: "search"});
			} ,

			properties: {
				lang: {
					type: String,
					value: "en",
					observer: "changeLang"
				},
				title: {
					type: Object,
					value: {}
				} ,
				button: {
					type: String,
					value: "FIND A CHURCH"
				} ,
				title1: {
					type: String,
					value: "EVANGELICAL MISSION &"
				} ,
				title2: {
					type: String,
					value: "SEMINARY INTERNATIONAL"
				} ,
				isEnglish: {
					type: Boolean,
					value: true
				}
			} ,

			updateTitle: function(e) {
				this.title = Polymer.dom(e).localTarget.output;

				if(this.lang == "en") {
					this.title1 = this.title.firstLine;
					this.title2 = this.title.secondLine;
				}
			} ,

			updateButton: function(e) {
				this.button = Polymer.dom(e).localTarget.output;
			} ,

			changeLang: function(newValue) {
				if(newValue == "en") {
					this.isEnglish = true;
				} else {
					this.isEnglish = false;
				}
			}
		});
	</script>
</dom-module>