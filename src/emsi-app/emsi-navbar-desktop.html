<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-menu/paper-submenu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html">

<dom-module id="emsi-navbar-desktop">
	<template>
		<style>
			:host {
				display: block;
			}

			.navbuttons {
				position: absolute;
				top: 12pt;
				margin-left: 220pt;
			}

			.menu-trigger, paper-item {	
		    width: 80pt;
    		height: 30px;
		    padding-top: 20px;
		    padding-bottom: 0;
		    font-family: MyriadProSemiBold;
		    color: rgba(0,0,0,0.6);
		    font-size: 9pt;
		    padding-left: 20pt;
			}

			paper-item {
				width: 80pt;
    		height: 20px;
		    padding-top: 10px;
		    padding-bottom: 0;
		    font-family: MyriadProSemiBold;
		    color: rgba(0,0,0,0.6);
		    font-size: 9pt;
		    padding-left: 20pt;
			}

			paper-item:hover, .menu-trigger:hover {
				background-color: rgba(0,0,0,0.2);
				cursor: pointer;
			}

		</style>
		<div class="container">

			<paper-menu-button class="navbuttons" on-mouseenter="openSubMenu" on-mouseleave="closeAllMenus" style="left:0pt" vertical-offset="55" horizontal-offset="8">
			  <div slot="dropdown-trigger" class="menu-trigger"> ABOUT US </div>
			  <paper-listbox slot="dropdown-content" class="menu-content" selectable="none">
			    <div on-tap="changeRoute" class="menu-trigger"> Organization </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Beliefs </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Missions </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Seminary </div>
			  </paper-listbox>
			</paper-menu-button>

			<paper-menu-button class="navbuttons" on-mouseenter="openSubMenu" on-mouseleave="closeAllMenus" style="left:90pt" vertical-offset="55" horizontal-offset="8">
			  <div slot="dropdown-trigger" class="menu-trigger"> LOCATIONS </div>
			  <paper-listbox slot="dropdown-content" class="menu-content" selectable="none">
			    <div on-tap="changeRoute" class="menu-trigger"> Search </div>
			    <div on-tap="changeRoute" class="menu-trigger"> America </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Europe </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Asia </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Africa </div>
			  </paper-listbox>
			</paper-menu-button>

			<paper-menu-button class="navbuttons" on-mouseenter="openSubMenu" on-mouseleave="closeAllMenus" style="left:180pt" vertical-offset="55" horizontal-offset="8">
			  <div slot="dropdown-trigger" class="menu-trigger"> MISSIONS </div>
			  <paper-listbox slot="dropdown-content" class="menu-content" selectable="none">
			    <div on-tap="changeRouteToMissions" class="menu-trigger"> Introduction </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Ministries </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Churches </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Activities </div>
			  </paper-listbox>
			</paper-menu-button>

			<paper-menu-button class="navbuttons" on-mouseenter="openSubMenu" on-mouseleave="closeAllMenus" style="left:270pt" vertical-offset="55" horizontal-offset="8">
			  <div slot="dropdown-trigger" class="menu-trigger"> SEMINARY </div>
			  <paper-listbox slot="dropdown-content" class="menu-content" selectable="none">
			    <div on-tap="changeRouteToSeminary" class="menu-trigger"> Introduction </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Courses </div>
			    <div on-tap="changeRoute" class="menu-trigger"> Curriculum </div>
			  </paper-listbox>
			</paper-menu-button>

		</div>
	</template>
	<script>
		class EMSINavbarDesktop extends Polymer.Element {
			static get is() { return 'emsi-navbar-desktop'; }

			static get properties() { return {}; }

			openMenu(e) {
				var submenuObj = Polymer.dom(e).localTarget.parentNode.parentNode;
				var isOpen = submenuObj.opened;

				this.closeAllMenus();

	        	if(!isOpen) {
	        		submenuObj.close();
	        	} else {
	        		submenuObj.open();
	        	}
			}

			openSubMenu(e) {
				var submenuObj = Polymer.dom(e).localTarget;
				submenuObj.open();
			}

			closeAllMenus(e) {
				var submenuArr = Polymer.dom(this.root).querySelectorAll("paper-menu-button");
      	for(var i = 0; i < submenuArr.length; i++) {
      		submenuArr[i].close();
      	}				
			}

			changeRoute(e) {
				var text = Polymer.dom(e).localTarget.innerText;

				if(text == "Organization") {
					this.dispatchEvent(new CustomEvent('emsi-route-change-event', { detail: "about", bubbles: true, composed: true }));
				} else if(text == "Introduction") {
					// Do nothing
				} else {
					this.dispatchEvent(new CustomEvent('emsi-route-change-event', { detail: text.toLowerCase(), bubbles: true, composed: true }));
				}

				this.closeAllMenus();
			}

			changeRouteToMissions() {
				this.dispatchEvent(new CustomEvent('emsi-route-change-event', { detail: "missions", bubbles: true, composed: true }));
				this.closeAllMenus();
			}

			changeRouteToSeminary() {
				this.dispatchEvent(new CustomEvent('emsi-route-change-event', { detail: "seminary", bubbles: true, composed: true }));
				this.closeAllMenus();
			}
		}

		window.customElements.define(EMSINavbarDesktop.is, EMSINavbarDesktop);
	</script>
</dom-module>